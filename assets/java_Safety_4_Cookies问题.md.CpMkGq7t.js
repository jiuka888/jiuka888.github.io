import{_ as i,c as o,o as e,a4 as a}from"./chunks/framework.DpC1ZpOZ.js";const C=JSON.parse('{"title":"Cookies 问题","description":"","frontmatter":{},"headers":[],"relativePath":"java/Safety/4_Cookies问题.md","filePath":"java/Safety/4_Cookies问题.md","lastUpdated":1728037326000}'),l={name:"java/Safety/4_Cookies问题.md"},s=a('<h1 id="cookies-问题" tabindex="-1">Cookies 问题 <a class="header-anchor" href="#cookies-问题" aria-label="Permalink to &quot;Cookies 问题&quot;">​</a></h1><h2 id="cookies-特点" tabindex="-1">Cookies 特点 <a class="header-anchor" href="#cookies-特点" aria-label="Permalink to &quot;Cookies 特点&quot;">​</a></h2><ul><li>前端数据存储</li><li>后端可通过 HTTP 头设置</li><li>请求时通过 HTTP 头传给后端</li><li>前端可读写</li><li>遵守同源（同协议、同域名、同端口）策略</li></ul><h2 id="cookies-属性" tabindex="-1">Cookies 属性 <a class="header-anchor" href="#cookies-属性" aria-label="Permalink to &quot;Cookies 属性&quot;">​</a></h2><ul><li>域名（Domain）</li><li>有效期（Expires）</li><li>路径（Path）</li><li>http-only</li><li>secure</li></ul><h2 id="cookies-作用" tabindex="-1">Cookies 作用 <a class="header-anchor" href="#cookies-作用" aria-label="Permalink to &quot;Cookies 作用&quot;">​</a></h2><ul><li>存储个性化设置</li><li>存储未登录时用户唯一标识</li><li>存储已登录用户的凭证</li><li>存储其他业务数据</li></ul><h2 id="登录用户凭证" tabindex="-1">登录用户凭证 <a class="header-anchor" href="#登录用户凭证" aria-label="Permalink to &quot;登录用户凭证&quot;">​</a></h2><h3 id="_1-过程" tabindex="-1">1. 过程 <a class="header-anchor" href="#_1-过程" aria-label="Permalink to &quot;1. 过程&quot;">​</a></h3><ul><li>前端提交用户名和密码</li><li>后端验证用户名和密码</li><li>后端通过 HTTP 头设置用户凭证</li><li>后续访问时后端先验证用户凭证</li></ul><h3 id="_2-用户凭证" tabindex="-1">2. 用户凭证 <a class="header-anchor" href="#_2-用户凭证" aria-label="Permalink to &quot;2. 用户凭证&quot;">​</a></h3><ul><li>用户 ID（容易被查看）</li><li>用户 ID + 签名 （签名不易被猜到，比较安全）</li><li>sessionId （Cookie 中只维护 sessionId）</li></ul><h2 id="cookies-和-xss-的关系" tabindex="-1">Cookies 和 XSS 的关系 <a class="header-anchor" href="#cookies-和-xss-的关系" aria-label="Permalink to &quot;Cookies 和 XSS 的关系&quot;">​</a></h2><p>XSS 可能会偷取 Cookies。防御：将 Cookie 设置为 http-only。</p><h2 id="cookies-和-csrf-的关系" tabindex="-1">Cookies 和 CSRF 的关系 <a class="header-anchor" href="#cookies-和-csrf-的关系" aria-label="Permalink to &quot;Cookies 和 CSRF 的关系&quot;">​</a></h2><p>CSRF 利用了用户 Cookies，但攻击站点无法读写 Cookies。</p><p>防御：禁止第三方网站带 Cookies，但是这样适配性比较差，目前只有 Chrome 支持。</p><h2 id="cookies-安全策略" tabindex="-1">Cookies 安全策略 <a class="header-anchor" href="#cookies-安全策略" aria-label="Permalink to &quot;Cookies 安全策略&quot;">​</a></h2><ul><li>签名防篡改</li><li>私有变换（加密）</li><li>http-only</li><li>same-site</li></ul>',19),t=[s];function r(h,c,n,k,d,u){return e(),o("div",null,t)}const f=i(l,[["render",r]]);export{C as __pageData,f as default};
