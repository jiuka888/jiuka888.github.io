import{_ as a,c as e,o as r,a4 as t}from"./chunks/framework.DpC1ZpOZ.js";const f=JSON.parse('{"title":"跨站请求伪造","description":"","frontmatter":{},"headers":[],"relativePath":"java/Safety/3_跨站请求伪造.md","filePath":"java/Safety/3_跨站请求伪造.md","lastUpdated":null}'),o={name:"java/Safety/3_跨站请求伪造.md"},i=t('<h1 id="跨站请求伪造" tabindex="-1">跨站请求伪造 <a class="header-anchor" href="#跨站请求伪造" aria-label="Permalink to &quot;跨站请求伪造&quot;">​</a></h1><h2 id="概念" tabindex="-1">概念 <a class="header-anchor" href="#概念" aria-label="Permalink to &quot;概念&quot;">​</a></h2><p>跨站请求伪造（Cross-site request forgery，CSRF），是攻击者通过一些技术手段欺骗用户的浏览器去访问一个自己曾经认证过的网站并执行一些操作（如发邮件，发消息，甚至财产操作如转账和购买商品）。由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去执行。</p><p>XSS 利用的是用户对指定网站的信任，CSRF 利用的是网站对用户浏览器的信任。</p><h2 id="攻击原理" tabindex="-1">攻击原理 <a class="header-anchor" href="#攻击原理" aria-label="Permalink to &quot;攻击原理&quot;">​</a></h2><div align="center"><img src="https://gitee.com/duhouan/ImagePro/raw/master/java-notes/sfatety/safety_2.png" width="425"></div><ul><li>用户登录 A 网站</li><li>A 网站确认身份</li><li>B 网站页面向 A 网站发起请求（带 A 网站身份） <ul><li>B 网站向 A 网站请求，带 A 网站 Cookies</li><li>不访问 A 网站前端</li><li>referer 为 B 网站</li></ul></li></ul><h2 id="危害" tabindex="-1">危害 <a class="header-anchor" href="#危害" aria-label="Permalink to &quot;危害&quot;">​</a></h2><ul><li>利用用户登录态</li><li>用户不知情</li><li>完成业务请求</li></ul><h2 id="防御" tabindex="-1">防御 <a class="header-anchor" href="#防御" aria-label="Permalink to &quot;防御&quot;">​</a></h2><h3 id="带-a-网站-cookies" tabindex="-1">带 A 网站 Cookies <a class="header-anchor" href="#带-a-网站-cookies" aria-label="Permalink to &quot;带 A 网站 Cookies&quot;">​</a></h3><p>利用 Cookie 中新增<strong>属性 same-site</strong>，禁止第三方网站带 Cookies。但是这样适配性比较差，目前只有 Chrome 支持。</p><h3 id="不访问-a-网站前端" tabindex="-1">不访问 A 网站前端 <a class="header-anchor" href="#不访问-a-网站前端" aria-label="Permalink to &quot;不访问 A 网站前端&quot;">​</a></h3><p>在前端页面加入验证消息，有 2 种方式：</p><ul><li><p><strong>验证码</strong></p><p>因为 CSRF 攻击是在用户无意识的情况下发生的，所以要求用户输入验证码可以让用户知道自己正在做的操作。</p></li><li><p><strong>token</strong></p><p>例如服务器生成随机数并附加在表单中，并要求客户端传回这个随机数。</p></li></ul><h3 id="referer-为-b-网站" tabindex="-1">referer 为 B 网站 <a class="header-anchor" href="#referer-为-b-网站" aria-label="Permalink to &quot;referer 为 B 网站&quot;">​</a></h3><p><strong>验证 referer</strong>。判断请求的来源是否合法。</p>',17),l=[i];function s(n,h,d,c,_,u){return r(),e("div",null,l)}const m=a(o,[["render",s]]);export{f as __pageData,m as default};
